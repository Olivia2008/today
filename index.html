<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>HUI </title>
<link rel="stylesheet" type="text/css" href="css/hui.css" />
<!-- 全屏广告动画 -->
<style>
.hui-start-banner{width:100%; height:100%; position:fixed; z-index:99999998; left:0px; top:0px; background:#FFFFFF; display:none;}
#hui-start-banner-close{width:50px; position:fixed; z-index:99999999; top:20px; right:20px; background:#FFFFFF; display:none; text-align:center; border-radius:3px; height:28px; line-height:28px; font-size:14px; color:#26A2FF;}
.hui-start-banner .hui-swipe-indicator{width:96%; position:absolute; z-index:3; left:2%; bottom:20px; display:none;}
</style>
</head>
<body>
	<!--启动动画-->
<!--<div class="hui-start-banner" id="startBanner">
    <div class="hui-swipe-item" style="background:#2C2342;"><img src="img/startBanner1.png" /></div>
    <div class="hui-swipe-item" style="background:#6CC5F1;"><img src="img/startBanner2.png" /></div>
    <div class="hui-swipe-item" style="background:#62C0CC;"><a href="javascript:huiStartBannerClose();"><img src="img/startBanner3.png" /></a></div>
</div>
<div id="hui-start-banner-close" onclick="huiStartBannerClose();">关闭</div>
-->
<!--首页内容-->
<header class="hui-header">
	<div id="" class="hui-fl">
		<div class="hui-fl"><img src="img/logo.png" width="100" /></div>
	</div>
	<div id="topSearch">
		 	<span class="hui-icons hui-icons-search" style="color:#999999;"></span> 
		 	搜您想搜的
	</div>
</header>

<div class="hui-wrap" >
	<div id="topCat">
		<div id="">
			<a href="javascript:chansgeCate(0);" class="topCateSed">推荐</a>
			<a href="javascript:changeCate(1);">热点</a>
			<a href="javascript:changeCate(2);">视频</a>
			<a href="javascript:changeCate(3);">本地</a>
			<a href="javascript:changeCate(4);">社会</a>
			<a href="javascript:changeCate(5);">娱乐</a>
			<a href="javascript:changeCate(6);">问答</a>
			<a href="javascript:changeCate(7);">汽车</a>
			<a href="javascript:changeCate(8);">体育</a>
		</div>
		
	</div>
</div>
<div id="hui-footer">
	<a href="javascript:changeSubView(0);" id="nav-home">
		<div class="hui-footer-icons hui-icons-home"></div>
		<div class="hui-footer-text">首页</div>
	</a>
	<a href="javascript:changeSubView(1);" id="nav-news">
		<div class="hui-footer-icons hui-icons-news"></div>
		<div class="hui-footer-text">新闻</div>
	</a>
	
	<a href="javascript:changeSubView(2);" id="nav-map">
		<div class="hui-footer-icons" ><img src="img/map.png" style="width:30%; height: 70%;"/></div>
		<div class="hui-footer-text">地图</div>
	</a>
	<a href="javascript:hui.toast('我的');" id="nav-my">
		<div class="hui-footer-icons hui-icons-my"></div>
		<div class="hui-footer-text">我的</div>
	</a>
</div>


<script type="text/javascript" src="js/hui.js" charset="UTF-8"></script>
<!--<script src="js/hui-swipe.js" type="text/javascript" charset="utf-8"></script>-->
<script type="text/javascript">
	//沉浸式导航
	hui.immersedStatusbar();
	//底部导航
	var subpages =  new Array(
		new Array('news.html', {top:'64px', bottom:"55px", left:"0"}),
		new Array('map.html', {top:'44px', bottom:"55px", left:"100%"}),
		new Array('mine.html', {top:'44px', bottom:"55px", left:"200%"})
	);
	
	/*//启动动画
	var swipe;
//自适应移动设备的高度
			var wininfo = hui.winInfo();
			console.log(wininfo.height);
			
			hui('#startBanner').find('.hui-swipe-item').css({height:wininfo.height+'px'});
			//显示动画图片
			hui('#startBanner').show();
			//显示关闭按钮
			hui('#hui-start-banner-close').show();
			//启动动画
			swipe      = new huiSwipe('#startBanner');
			//swipe.autoPlay = false;
			//swipe.loop     = false;
			swipe.run();
			
//封闭关闭按钮，点击最后图片关闭，点击按钮关闭
function huiStartBannerClose(){
    hui('#startBanner').remove();
    hui('#hui-start-banner-close').remove();    
}*/
	
	document.addEventListener('plusready',function(){
		plus.screen.setBrightness( 0.7 );
		plus.device.setWakelock(true);
		console.log(plus.screen.resolutionHeight+','+plus.screen.resolutionWidth);
		
		//点击或滑动进入下一个页面
		var indexView = hui.getView('index.html');
	    var nextPage = {
	        pageId : 'news.html',
	        callBack : function(){
	            indexView.evalJS('hui("#hui-footer").find("a").removeClass("hui-footer-active"); hui("#nav-news").addClass("hui-footer-active")');
	        }
	    }
	    var prevPage = null;
	    hui.drag(prevPage, nextPage);
		//底部导航
		hui.subpages(subpages);
		
		//点击底部图标切换子窗口
	function changeSubView(index){
		for(var i = 0; i< subpages.length; i++){
			var subpage = hui.getView(subpages[i][0]);
			subpage.setStyle({'left' : ((index - i) * 100 )+'%'});
		}
		//选项状态激活
		hui('#hui-footer a').removeClass('hui-footer-active');
		hui('#hui-footer a').eq(index).addClass('hui-footer-active');
	}
		
		/*var currenView=plus.webview.currentWebview();
		currenView.hide();
		plus.webview.open('index1.html','index1.html',{},function(){
			var index1View=plus.webview.getWebviewById('index1.html');
			currenView.hide();
			index1View.show();
				
		});*/
		
		//如果已经登录过一次，下次再登录就不再显示动画
		/*var startBannerId=plus.storage.getItem('startBannerId');
		if(!startBannerId){
			//自适应移动设备的高度
			var wininfo = hui.winInfo();
			console.log(wininfo.height);
			
			hui('#startBanner').find('.hui-swipe-item').css({height:wininfo.height+'px'});
			//显示动画图片
			hui('#startBanner').show();
			//显示关闭按钮
			hui('#hui-start-banner-close').show();
			//启动动画
			swipe      = new huiSwipe('#startBanner');
			//swipe.autoPlay = false;
			//swipe.loop     = false;
			swipe.run();
			//登录后记录一下
			plus.storage.setItem('startBannerId','1');
		}else{
			huiStartBannerClose();
		}*/
		
		
		//创建子窗口
			var subView=plus.webview.create('indexSub.html','indexSub.html',{top:'87px',bottom:'0px'});
			var self=plus.webview.currentWebview();
			self.append(subView);
			
	});
	//横向滑动
	hui('#topCat').scrollX(7,'a');
	
	
	function changeCate(cateId){
		hui('#topCat').find('a').removeClass('topCateSed').eq(cateId).addClass('topCateSed');
		//获取子页面的id，点击不同的a标签给子页面传递不同的cateid;
		var subview=plus.webview.getWebviewById('indexSub.html');
		//调用子页面的changeCate()方法
		subview.evalJS('changeCate('+cateId+')');
	}
	
</script>
</body>
</html>